Piano di modifica per buzz/training/prepare_dataset.py

Obiettivo: Aggiornare lo script per processare i nuovi file di dati in formato JSON dalla directory `generated_examples_rust/`.

Logica obsoleta da rimuovere:
- L'intero processo di parsing basato su regular expression (`SEGMENT_START_REGEX`).
- La logica a due passate per consolidare segmenti multi-linea e calcolare gli span.
- La lettura di file `.txt`.

Nuova logica da implementare:
1.  **Modifica directory e tipo di file:** Lo script dovrà cercare i file con estensione `.json` nella directory `SOURCE_DIR` ("generated_examples_rust").
2.  **Semplificazione del loop principale:**
    - Itera su ogni file `.json` trovato.
    - Per ogni file, carica il contenuto JSON in un dizionario Python.
    - Estrai direttamente i valori associati alle chiavi `"full_text"` e `"spans"`.
3.  **Adattamento del formato "spans":**
    - I nuovi file JSON usano la chiave `"category"` all'interno degli oggetti `spans`. Lo script originale produceva oggetti con `"label"`.
    - Il nuovo script dovrà trasformare ogni oggetto in `spans` da `{"category": "NOME", "start": X, "end": Y}` a `{"label": "NOME", "start": X, "end": Y}` per mantenere la compatibilità con gli script di training a valle (da verificare, ma è l'ipotesi più sicura).
4.  **Scrittura dell'output:**
    - Per ogni file JSON di input, scrivi una singola riga nel file `OUTPUT_FILE` ("dataset.jsonl").
    - La riga deve essere un oggetto JSON contenente il `full_text` e la lista di `spans` (adattati al punto 3).
5.  **Pulizia:** Rimuovere le importazioni non più necessarie (es. `re`). Mantenere `os` e `json`.
