## Plan for vespe-cli API Refactoring 

**Objective:** Update `vespe-cli` to utilize the new task lifecycle API implemented in the `vespe` crate, ensuring compatibility and restoring previous functionality.

**Current State:**
*   The `vespe` crate (backend) has undergone significant refactoring, introducing new task lifecycle methods on the `Task` struct and wrapper methods on the `Project` struct.
*   Old methods like `Project::create_and_define_task`, `Project::update_task`, `Task::define_objective` (direct call), `Task::define_plan` (direct call), and `Task::review_task` have been removed or modified.
*   New methods like `Project::set_task_name`, `Project::define_objective`, `Project::define_plan`, `Project::accept_plan`, `Project::reject_plan`, etc., are now available.

**Proposed Changes:**

1.  **Identify `vespe-cli` commands that interact with tasks:**
    *   This likely includes commands for creating, updating, listing, and potentially reviewing tasks.

2.  **Update `vespe-cli` command implementations:**
    *   **Task Creation:** Commands that previously used `Project::create_and_define_task` will need to be updated to:
        *   Call `Project::create_task` first to get a new task UID.
        *   Then, call `Project::define_objective` and `Project::define_plan` (if applicable) to set the task's details.
    *   **Task Updating:** Commands that previously used `Project::update_task` will need to be updated to:
        *   Call `Project::set_task_name` to update the task's name.
        *   Call `Project::define_objective` to update the task's objective.
        *   Call `Project::define_plan` to update the task's plan (if applicable).
    *   **Task Listing/Viewing:** Commands that list or view tasks will need to adapt to the new `Task` struct fields (e.g., `task.config.task_type`, `task.status.is_paused`, `task.status.current_state`).
    *   **Task Review:** If `vespe-cli` had a task review command, it will need to use the new `Project::accept_plan` or `Project::reject_plan` methods, or other relevant lifecycle methods.

3.  **Review `vespe-cli` dependencies and imports:**
    *   Ensure all necessary `vespe` crate modules and types are correctly imported.

4.  **Testing:**
    *   After implementing the changes, run `cargo build --package vespe-cli` to check for compilation errors.
    *   Manually test each affected `vespe-cli` command to ensure it functions as expected.

**Granularity of Commits:**
I will make granular commits for each logical change, similar to how we handled the `vespe-tui` refactoring.
