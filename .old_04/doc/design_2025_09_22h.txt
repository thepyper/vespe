# Design - Entità Progetto (Project)

## Obiettivo
Definire l'entità "Progetto" come il contesto radice per tutte le operazioni di Vespe, fungendo da contenitore per Task, Agenti e Tool, e gestendo le configurazioni globali a livello di progetto.

## Concetto di Progetto

Un "Progetto" in Vespe non è un'entità complessa con una propria macchina a stati o un ciclo di vita elaborato. È piuttosto il **contesto operativo** definito dalla directory radice del progetto dell'utente, che contiene la directory `.vespe/`.

La directory `.vespe/` è il cuore dello stato di Vespe per quel progetto specifico. L'idea è che l'utente possa scegliere di versionare questa directory con Git, garantendo che lo stato di Vespe sia sempre sincronizzato con il codice sorgente del progetto.

## Struttura Filesystem del Progetto

Il Progetto è identificato dalla presenza della directory `.vespe/` nella sua radice.

**Esempio di struttura:**

```
/path/to/user/project_root/
├── .git/                 // Repository Git del progetto utente
├── src/                  // Codice sorgente del progetto utente
├── Cargo.toml            // Configurazione Rust del progetto utente
└── .vespe/               // Directory radice dello stato di Vespe per questo progetto
    ├── agents/           // Contiene le directory UID degli Agenti
    ├── tools/            // Contiene le directory UID dei Tool di Progetto
    ├── tasks/            // Contiene le directory UID dei Task
    ├── project_config.json // File di configurazione globale del Progetto
    └── ...               // Altre configurazioni o dati specifici di Vespe
```

## File di Configurazione del Progetto

Il file `project_config.json` (situato in `.vespe/project_config.json`) conterrà le configurazioni globali che influenzano il comportamento di Vespe per l'intero progetto.

1.  **`project_config.json`**:
    *   `name`: Nome leggibile del progetto Vespe (opzionale, potrebbe derivare dal nome della directory radice).
    *   `description`: Descrizione del progetto Vespe.
    *   `active_kits`: Array di `kit_id` che il progetto ha scelto di attivare. Questi Kit (forniti da Vespe a livello di installazione) definiscono quali Tool sono disponibili per il progetto.
    *   `tool_resolution_order`: Array di stringhe che definisce l'ordine di precedenza nella risoluzione dei Tool con lo stesso `name`. Esempi: `["project_tools", "active_kits"]` (i Tool di progetto sovrascrivono i Tool dei Kit), o `["active_kits", "project_tools"]`.
    *   `default_agent_uid`: (Opzionale) UID dell'agente predefinito da utilizzare se non specificato altrove.
    *   `manager_agent_config`: (Opzionale) Configurazione specifica per il Manager Agent a livello di progetto, sovrascrivendo le impostazioni globali di Vespe.

## Implicazioni API (Crate `project`)

Il crate `project` fornirà funzioni per interagire con il contesto del progetto:

*   **`load_project_config(project_root_path: &Path) -> Result<ProjectConfig, ProjectError>`**: Carica la configurazione globale del progetto.
*   **`save_project_config(project_root_path: &Path, config: &ProjectConfig) -> Result<(), ProjectError>`**: Salva la configurazione globale del progetto.
*   **`get_project_root_path() -> Result<PathBuf, ProjectError>`**: Funzione per determinare la directory radice del progetto (risalendo l'albero delle directory fino a trovare `.vespe/`).
*   **`get_tasks_base_path(project_root_path: &Path) -> PathBuf`**: Restituisce il percorso alla directory `tasks/` all'interno di `.vespe/`. (Simile per `agents/` e `tools/`).
*   **`resolve_tool_for_project(project_root_path: &Path, tool_name: &str) -> Result<Tool, ProjectError>`**: Funzione che risolve un Tool dato il suo nome, considerando i Kit attivi e i Tool di Progetto, basandosi sulla configurazione del progetto.
*   **`list_all_project_tasks(project_root_path: &Path) -> Vec<Task>`**: Elenca tutti i task all'interno del progetto. (Simile per agenti e tool).
