@include rules
@include project
@include agent/planner

facciamo piccoli refactor, SENZA CAMBIARE NULLA NEL FUNZIONAMENTO CHE VA BENISSIMO, al modulo src/ast2

Tutto e' dentro al mod.rs, vorrei separarlo in diversi files.
Facciamo una cosa alla volta, intanto leggi il file e proponimi una scomposizione sensata.
Non farla, prima discutiamone poi decido che fare.

<!-- answer-f90a7116-aaa1-4506-9b3a-fd8f899f1906:begin -->
Okay, I understand. I will read the `src/ast2/mod.rs` file to analyze its content and then propose a sensible decomposition into multiple files, without making any changes yet.

The `src/ast2/mod.rs` file is quite large and contains several distinct logical units. To improve readability and maintainability, I propose the following decomposition:

### Proposed File Structure:

*   **`src/ast2/mod.rs`**:
    *   This file would become the module entry point, primarily containing `pub use` statements to re-export items from other modules.
    *   It would also retain the top-level `parse_document` function, as it orchestrates the entire parsing process, and potentially the `Content` and `Document` enums/structs, as they represent the final Abstract Syntax Tree (AST) structure.

*   **`src/ast2/types.rs`**:
    *   This file would define all the core data structures that represent the AST nodes and parsing utilities.
    *   **Contents:** `Position`, `Range`, `CommandKind`, `AnchorKind`, `Parameters`, `Argument`, `Arguments`, `Tag`, `Anchor`.

*   **`src/ast2/error.rs`**:
    *   This file would centralize all error definitions for the `ast2` module.
    *   **Contents:** `Ast2Error` enum and the `Result<T>` type alias.

*   **`src/ast2/parser.rs`**:
    *   This file would encapsulate the low-level parsing machinery.
    *   **Contents:** The `Parser` struct and all its associated methods (e.g., `new`, `advance`, `consume_char_if`, `consume_many_if`, `skip_many_whitespaces`, `is_eod`, `is_eol`, etc.).

*   **`src/ast2/parse_primitives.rs`**:
    *   This file would contain functions responsible for parsing basic, atomic elements.
    *   **Contents:** `_try_parse_identifier`, `_try_parse_uuid`, `_try_parse_nude_integer`, `_try_parse_nude_float`, `_try_parse_nude_bool`, `_try_parse_nude_string`, `_try_parse_enclosed_string`.

*   **`src/ast2/parse_elements.rs`**:
    *   This file would group functions that parse intermediate-level elements, often composed of primitives.
    *   **Contents:** `_try_parse_command_kind`, `_try_parse_anchor_kind`, `_try_parse_parameters`, `_try_parse_parameter`, `_try_parse_arguments`, `_try_parse_argument`, `_try_parse_value`, `_try_parse_enclosed_value`.

*   **`src/ast2/parse_structures.rs`**:
    *   This file would contain the functions responsible for parsing the main structural components of the document.
    *   **Contents:** `_try_parse_tag`, `_try_parse_anchor`, `_try_parse_text`, and `parse_content`.

This breakdown separates concerns logically, making each file more focused and easier to understand, test, and modify independently.

What do you think of this proposed decomposition?
<!-- answer-f90a7116-aaa1-4506-9b3a-fd8f899f1906:end -->