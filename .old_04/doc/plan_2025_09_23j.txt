Piano: Definizione di `Context` e `Response` in `vespe-project`

## Obiettivo
Definire le strutture dati `Context` e `Response` all'interno della crate `vespe-project`. Queste strutture serviranno come interfaccia standardizzata per la comunicazione tra `vespe-project` e gli agenti esterni (LLM o altri), permettendo a `vespe-project` di fornire il contesto necessario agli agenti e di ricevere i loro risultati in un formato comprensibile.

## Motivazione
*   **Disaccoppiamento:** Mantiene `vespe-project` agnostico rispetto all'implementazione specifica degli agenti, trattandoli come "black box".
*   **Standardizzazione:** Fornisce un'interfaccia chiara e coerente per lo scambio di informazioni.
*   **Flessibilità:** Permette l'evoluzione indipendente degli agenti e di `vespe-project`.
*   **Preparazione per l'integrazione:** Pone le basi per l'integrazione futura di agenti nel sistema.

## Dettagli delle Proposte

### 1. Creazione del Modulo `agent_api` in `vespe-project`
Creeremo un nuovo modulo `agent_api.rs` all'interno di `vespe-project/src/`. Questo modulo conterrà le definizioni di `Context` e `Response` e qualsiasi altra struttura dati correlata che funga da API per l'interazione con gli agenti.

### 2. Definizione della Struct `Context`

**File:** `vespe-project/src/agent_api.rs`

```rust
// vespe-project/src/agent_api.rs

use std::path::PathBuf;
use serde::{Serialize, Deserialize};
use crate::{Task, Tool, ProjectConfig}; // Assumendo che Task, Tool e ProjectConfig siano già definite e pubbliche

/// Rappresenta il contesto fornito a un agente per l'esecuzione di un'azione.
/// Contiene tutte le informazioni rilevanti che l'agente potrebbe necessitare.
#[derive(Debug, Serialize, Deserialize, Clone)]
pub struct Context {
    /// Il prompt principale o la richiesta dell'utente per l'agente.
    pub prompt: String,
    /// L'UID del task corrente, se l'agente opera nel contesto di un task specifico.
    pub current_task_uid: Option<String>,
    /// Il percorso della root del progetto Vespe.
    pub project_root: PathBuf,
    /// La configurazione del progetto Vespe.
    pub project_config: ProjectConfig,
    /// Una lista delle definizioni degli strumenti disponibili per l'agente.
    /// Questi strumenti possono essere richiamati dall'agente.
    pub available_tools: Vec<Tool>,
    // TODO: Aggiungere altri campi man mano che le esigenze si evolvono, ad esempio:
    // pub chat_history: Vec<Message>, // Per agenti conversazionali
    // pub working_directory: PathBuf, // Per operazioni su file
    // pub relevant_files: Vec<PathBuf>, // File rilevanti per il contesto
}
```

**Ragionamento per i campi di `Context`:**
*   `prompt: String`: Il cuore della richiesta all'agente.
*   `current_task_uid: Option<String>`: Essenziale per agenti che operano su task specifici (es. `vespe task chat`). `Option` perché non tutti i contesti potrebbero essere legati a un task.
*   `project_root: PathBuf`: L'agente deve sapere dove si trova la root del progetto per accedere a file o configurazioni.
*   `project_config: ProjectConfig`: Fornisce all'agente le impostazioni globali del progetto.
*   `available_tools: Vec<Tool>`: Cruciale per gli agenti che devono decidere quali strumenti utilizzare. `Tool` dovrebbe essere una rappresentazione serializzabile della definizione di uno strumento.
*   **TODOs:** I commenti `TODO` indicano futuri campi che potrebbero essere aggiunti man mano che il sistema evolve, mantenendo la struttura iniziale snella ma estensibile.

### 3. Definizione della Struct `Response`

**File:** `vespe-project/src/agent_api.rs`

```rust
// vespe-project/src/agent_api.rs

use serde::{Serialize, Deserialize};
// use crate::models::ToolCall; // Se ToolCall sarà una struct definita altrove

/// Rappresenta la risposta strutturata di un agente.
/// Contiene il risultato dell'elaborazione dell'agente e le eventuali azioni suggerite.
#[derive(Debug, Serialize, Deserialize, Clone)]
pub struct Response {
    /// La risposta testuale principale dell'agente.
    pub text_response: String,
    // TODO: Aggiungere altri campi man mano che le esigenze si evolvono, ad esempio:
    // pub tool_calls: Vec<ToolCall>, // Azioni suggerite dall'agente (es. chiamate a strumenti)
    // pub thoughts: Option<String>, // Pensieri interni dell'agente per debugging/trasparenza
    // pub new_task_state: Option<TaskState>, // Suggerimento per un cambio di stato del task
    // pub files_to_create: Vec<FileContent>, // Contenuto di file da creare
    // pub files_to_modify: Vec<FileContent>, // Contenuto di file da modificare
}
```

**Ragionamento per i campi di `Response`:**
*   `text_response: String`: La risposta testuale diretta dell'agente, sempre presente.
*   **TODOs:** Similmente a `Context`, i `TODO` indicano futuri campi per azioni strutturate (chiamate a strumenti, modifiche di stato, file generati), che verranno aggiunti quando l'orchestrazione degli agenti sarà più avanzata.

### 4. Aggiornamento di `vespe-project/src/lib.rs`
Esportare il nuovo modulo `agent_api` per renderlo accessibile ad altre crate che dipendono da `vespe-project`.

```rust
// vespe-project/src/lib.rs
// ... altre mod
pub mod agent_api;
```

### 5. Aggiornamento delle Dipendenze
Assicurarsi che `serde` e `serde_json` siano dipendenze di `vespe-project` con le feature `derive` abilitate.

```toml
# vespe-project/Cargo.toml
[dependencies]
# ... altre dipendenze
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
```

## Prossimi Passi
1.  Creare il file `doc/plan_2025_09_23j.txt` con questo piano.
2.  Implementare le modifiche in `vespe-project/src/agent_api.rs` e `vespe-project/src/lib.rs`.
3.  Aggiornare `vespe-project/Cargo.toml` con le dipendenze `serde` e `serde_json`.
4.  Eseguire `cargo build` per verificare che tutto compili correttamente.