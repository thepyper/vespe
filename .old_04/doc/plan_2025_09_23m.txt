Refactoring Plan: Introduce Project Object

**Goal:** To improve the design by encapsulating project-related information into a `Project` struct, replacing the pervasive passing of `project_root_path: &Path`.

**Problem Identified:**
*   **Anti-pattern:** Passing raw paths (`&Path`) around extensively leads to lack of context, repetitive code for loading project details, reduced type safety, and cumbersome testing.
*   **Current State:** `project_root_path: &Path` is a common argument in `src/api.rs` functions.
*   `ProjectConfig` exists but is not fully integrated into a central project object.

**Proposed Solution:**
Introduce a `Project` struct that encapsulates the project's root path and its configuration, and modify relevant functions to operate on this `Project` object.

**Phase 1: Define the `Project` Struct and its Core Methods**

1.  **Modify `src/project_models.rs`:**
    *   Add a new `Project` struct:
        ```rust
        pub struct Project {
            pub root_path: PathBuf,
            pub config: ProjectConfig,
        }
        ```
    *   Implement `Project::load(project_root_path: &Path) -> Result<Self, ProjectError>`:
        *   This method will attempt to load `ProjectConfig` from `.vespe/config.json` within the `project_root_path`.
        *   If `config.json` doesn't exist or fails to load, it should use `ProjectConfig::default()`.
        *   It will return a `Project` instance.
    *   Implement helper methods on `Project` to get paths to subdirectories (e.g., `tasks_dir()`, `tools_dir()`, `agents_dir()`), replacing the utility functions in `src/utils.rs`.

2.  **Modify `src/utils.rs`:**
    *   Remove `get_tasks_base_path`, `get_tools_base_path`, `get_agents_base_path` as their functionality will be moved to `Project` methods.
    *   Adapt `find_project_root` to return `Option<Project>` instead of `Option<PathBuf>`, by calling `Project::load` internally.
    *   Adapt `initialize_project_root` to return `Result<Project, ProjectError>`, by creating a default `ProjectConfig` and saving it, then returning a `Project` instance.

**Phase 2: Refactor `src/api.rs`**

1.  **Update Function Signatures:**
    *   Modify all public functions in `src/api.rs` that currently take `project_root_path: &Path` to instead take `project: &Project`.
    *   Examples:
        *   `create_task(project_root_path: &Path, ...)` becomes `create_task(project: &Project, ...)`
        *   `load_task(project_root_path: &Path, ...)` becomes `load_task(project: &Project, ...)`
        *   ...and so on for all relevant functions.

2.  **Update Function Bodies:**
    *   Inside these functions, replace usages of `project_root_path` with `project.root_path`.
    *   Replace calls to `get_tasks_base_path`, `get_tools_base_path`, `get_agents_base_path` with `project.tasks_dir()`, `project.tools_dir()`, `project.agents_dir()` respectively.
    *   Replace usages of `ProjectConfig::default()` with `project.config` where appropriate (e.g., in `list_available_tools`).

**Phase 3: Update CLI and TUI Consumers**

1.  **Modify `vespe-cli/src/main.rs`:**
    *   In `main()`, load the `Project` object once using `find_project_root` or `initialize_project_root`.
    *   Pass this `Project` object to all subsequent calls to `api::...` functions.

2.  **Modify `vespe-cli/src/cli/resolve.rs`:**
    *   Update `resolve_task` and `resolve_tool` to accept `project: &Project` instead of `project_root: &Path`.
    *   Adjust their internal logic to use `project.root_path` and `project.tasks_dir()`/`project.tools_dir()`.

3.  **Modify `vespe-tui/src/main.rs`:**
    *   If `vespe-tui` directly calls `vespe` API functions that take `project_root_path`, update them to take `project: &Project`.
    *   Load the `Project` object at the start of the TUI application.

**Verification Steps (after each phase/major step):**
*   Run `cargo check --workspace` to ensure all crates compile.
*   Run `cargo build --workspace`.
*   Test `vespe-cli` by running `cargo run --package vespe-cli -- --help` and other commands.
*   Test `vespe-tui` by running `cargo run --package vespe-tui`.

**Approval:**
I await your approval before proceeding with this refactoring plan.
