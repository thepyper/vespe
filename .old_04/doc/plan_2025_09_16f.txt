**Implementation Plan: Vespe - Tool `output_schema` and `read_file` Tool**

**Goal:** Enhance tool definitions with `output_schema` for better LLM understanding and implement a practical `read_file` tool to demonstrate its usage.

**Phase 5: Tool `output_schema` and `read_file` Tool**

**Step 1: Add `output_schema` to `Tool` Trait**

*   **Action:** Modify `src/tools/tool_trait.rs`.
    *   Add `fn output_schema(&self) -> &str;` to the `Tool` trait.
*   **Git Action:** Commit changes: "feat: Add output_schema to Tool trait."

**Step 2: Update `ToolRegistry::get_tool_metadata`**

*   **Action:** Modify `src/tools/tool_registry.rs`.
    *   Include `output_schema` in the JSON metadata generated by `get_tool_metadata`.
*   **Git Action:** Commit changes: "feat: Include output_schema in ToolRegistry metadata."

**Step 3: Update `EchoTool` with `output_schema`**

*   **Action:** Modify `src/tools/impls/echo_tool.rs`.
    *   Add a simple `output_schema` (e.g., `{"type": "object", "properties": {"transformed_text": {"type": "string"}}, "required": ["transformed_text"]}`).
*   **Git Action:** Commit changes: "feat: Add output_schema to EchoTool."

**Step 4: Update `PromptBuilder` to include `output_schema`**

*   **Action:** Modify `src/agent/core/prompt_builder.rs`.
    *   Update `build_system_prompt` to include `output_schema` in the tool descriptions provided to the LLM.
*   **Git Action:** Commit changes: "feat: Update PromptBuilder to include output_schema in tool descriptions."

**Step 5: Implement `read_file` Tool**

*   **Action:** Create `src/tools/impls/read_file_tool.rs`.
    *   Implement the `Tool` trait for `ReadFileTool`.
    *   `name()`: "read_file"
    *   `description()`: "Reads the content of a specified file."
    *   `input_schema()`: `{"type": "object", "properties": {"path": {"type": "string"}}, "required": ["path"]}`
    *   `output_schema()`: `{"type": "object", "properties": {"content": {"type": "string"}}, "required": ["content"]}` (for simplicity, we'll just return content for now).
    *   `execute()`: Read the file content from the given path. Handle errors (file not found, permission issues).
*   **Action:** Update `src/tools/impls/mod.rs` to export `read_file_tool`.
*   **Action:** Update `src/lib.rs` to register `ReadFileTool` in the `ToolRegistry`.
*   **Git Action:** Commit changes: "feat: Implement read_file tool."

**Step 6: Update `my_agent.json` to use `read_file` tool**

*   **Action:** Modify `sandbox/.vespe/agents/my_agent.json`.
    *   Add "read_file" to the `tools` list.
*   **Git Action:** Commit changes: "config: Add read_file tool to my_agent definition."

**Step 7: Test `read_file` Tool**

*   **Action:** Create a test file in the sandbox, e.g., `sandbox/test.txt`.
*   **Action:** Run `cargo run -- chat my_agent "Please read the content of the file 'test.txt' and summarize it." `.
*   **Expected Outcome:** The agent should call the `read_file` tool, read the content, and then summarize it.
*   **Git Action:** (No direct Git action for test execution, but ensure previous steps are committed).
