**Implementation Plan: Vespe - Robust LLM Response Parsing (Phase 3 Refinement)**

**Goal:** Enhance the `BasicAgent`'s ability to reliably parse LLM responses by strictly instructing the LLM to output a JSON array of `AgentAction` objects, and implementing robust parsing logic to handle this format.

**Phase 3 Refinement: Robust LLM Response Parsing**

**Step 1: Refine Prompting for LLM in `BasicAgent`**

*   **Action:** Modify `src/agent/impls/basic_agent.rs`.
    *   Update the system prompt to instruct the LLM to *always* respond with a JSON array of `AgentAction` objects.
    *   Explicitly define the structure and types (`tool_call`, `text_response`, `thought`) within the prompt, providing clear examples.
    *   The prompt should guide the LLM to output a JSON array, even if it contains only one action. This removes ambiguity.
*   **Git Action:** Commit changes: "refactor: Refine LLM prompting for strict JSON array of AgentAction responses."

**Step 2: Update `parse_llm_response` in `BasicAgent`**

*   **Action:** Modify `src/agent/impls/basic_agent.rs`.
    *   In the `parse_llm_response` function, the primary parsing attempt should be `serde_json::from_str::<Vec<AgentAction>>(response_content)`.
    *   Remove the fallback attempt to parse as a single `AgentAction` object, as the LLM is now strictly instructed to return an array.
    *   The `MalformedJsonHandling` logic will then apply if the response is not a valid `Vec<AgentAction>`.
*   **Git Action:** Commit changes: "refactor: Update parse_llm_response to strictly expect JSON array of AgentActions."

**Step 3: Test with `EchoTool` and New Prompting**

*   **Action:** Run `cargo run -- chat my_agent "please think a bit, then reply with tool echo with a fortune; remember you can only reply with a pure json object, or list"`.
*   **Expected Outcome:** The LLM should respond with a JSON array containing a `thought` action, a `tool_call` action for `echo`, and potentially a `text_response` action. The `echo` tool should execute, and its transformed output should be visible.
*   **Git Action:** (No direct Git action for test execution, but ensure previous steps are committed).
